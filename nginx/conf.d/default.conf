upstream radio {
    server 10.0.0.5:8090;
}

server {
    listen 8080 default_server;
    listen [::]:8080 default_server ipv6only=on;
    charset utf-8;

    # SSL configuration TLS

    #listen 443 ssl http2 default_server;
    #listen [::]:443 ssl http2 default_server ipv6only=on; #

    # Note: You should disable gzip for SSL traffic.
    # Read up on ssl_ciphers to ensure a secure configuration.
    # See: https://bugs.debian.org/765782 #
    # Self signed certs generated by the ssl-cert package
    # Don't use them in a production server!
    #
    # include snippets/snakeoil.conf;

    #root /backend;
    keepalive_timeout 5;

    server_name _;

    #include /etc/nginx/whitelist.conf;

    client_max_body_size 50m;

    location / {
        limit_except GET POST PUT PATCH DELETE {
            deny all;
        }
        #include /etc/nginx/cors;

        # First attempt to serve request as file, then
        # as directory, then fall back to displaying a 404.

        #try_files $uri $uri/ /404.html;

        proxy_set_header X-FORWARDED-FOR $remote_addr;
        proxy_set_header REMOTE_ADDR $remote_addr;

        include /etc/nginx/uwsgi_params;

        uwsgi_pass_request_body on;
        uwsgi_pass_request_headers on;

        #uwsgi_pass_request_body off;
        #uwsgi_param CONTENT_LENGTH 0;

        uwsgi_read_timeout 300;
        uwsgi_send_timeout 300;
        uwsgi_connect_timeout 300;

        uwsgi_max_temp_file_size 50M;

        uwsgi_pass radio;
    }

    location ~ /\.ht {
        deny all;
    }
    location ~ /\.well-known {
        allow all;
        access_log off;
        log_not_found off;
    }
    if ($badagent) {
        return 403;
    }
}
